# V2 Layout Assets - KPoint Script & AnimatedBackground

## Overview

Move shared assets from individual page components to the learning layout:
1. **KPoint Script** - Video player SDK
2. **AnimatedBackground** - Learning theme background

This ensures:
- Assets load once (not on every page navigation)
- Cleaner component code
- Consistent background across all learning pages

## Current State (V1)

Both are duplicated in `ModuleContent.tsx`:
```typescript
<AnimatedBackground intensity="medium" theme="learning" variant="full" />
<Script
  src="https://assets.zencite.in/orca/media/embed/videofront-vega.js"
  strategy="afterInteractive"
/>
```

**Problem**: Duplicated in every component, unnecessary re-renders.

## Target State (V2)

Both move to `app/(learning)/layout.tsx`:

### File: `app/(learning)/layout.tsx`

```typescript
import Script from "next/script";
import { type ReactNode } from "react";
import { NuqsAdapter } from "nuqs/adapters/next/app";
import { AnimatedBackground } from "@/components/ui/animated-background";
import { CourseProgressProvider } from "@/contexts/CourseProgressContext";
import { LearningPanelProvider } from "@/contexts/LearningPanelContext";
import { LearningLayoutContent } from "./LearningLayoutContent";

export default function LearningLayout({ children }: { children: ReactNode }) {
  return (
    <>
      {/* KPoint video player SDK - loads once for all learning pages */}
      <Script
        src="https://assets.zencite.in/orca/media/embed/videofront-vega.js"
        strategy="afterInteractive"
        id="kpoint-player-sdk"
      />
      
      {/* Animated background for all learning pages */}
      <AnimatedBackground intensity="medium" theme="learning" variant="full" />
      
      <NuqsAdapter>
        <LearningPanelProvider>
          <CourseProgressProvider>
            <LearningLayoutContent>{children}</LearningLayoutContent>
          </CourseProgressProvider>
        </LearningPanelProvider>
      </NuqsAdapter>
    </>
  );
}
```

## Changes Required

| File | Action |
|------|--------|
| `app/(learning)/layout.tsx` | Add Script + AnimatedBackground |
| `app/(learning)/course/[courseId]/module/[moduleId]/ModuleContent.tsx` | Remove both |
| `app/(learning)/v2/.../ModuleView.tsx` | Remove both from plan |

## Benefits

1. **Single render**: Background renders once, persists across navigation
2. **Faster navigation**: No re-mounting on page changes
3. **Cleaner components**: Page components focus on content only
4. **Consistent UX**: Same background across all learning routes

## Notes

- `AnimatedBackground` should be positioned fixed/absolute (verify in component)
- If different pages need different backgrounds, keep in individual pages
- Script `id` prevents duplicate tags on re-render

## One-Time Task

Simple migration before v2 implementation.

**Effort**: ~5 minutes
**Risk**: Low (additive change)
